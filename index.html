<!DOCTYPE html>
<html>
  <head>
    <meta name="copyright" content="Copyright (C) 2018-2025 Crawford Currie http://c-dot.co.uk license MIT">
    <meta charset="UTF-8">
    <meta name="Description" content="Dive Club Stores">
    <meta name="cache-control" content="public">
    <meta name="cache-control" content="max-age=0">
    <meta name="expires" content="BUILD_DATE">
    <meta name="build_date" content="BUILD_DATE">
    <title>Dive Club Stores</title>
    <!--base href="app"> DON'T DO THIS - it'll banjax jquery-ui.tabs -->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon" />

    <!-- for ios 7 style, multi-resolution icon of 152x152 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
    <link rel="apple-touch-icon" href="app/images/shed.svg" />
    <!-- for Chrome on Android, multi-resolution icon of 196x196 -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" sizes="196x196" href="app/images/shed.svg" />
    <link rel="shortcut icon" href="app/images/favicon.png" type="png" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

    <link href="app/node_modules/jquery-ui/dist/themes/cupertino/jquery-ui.css" rel="stylesheet">
    <link href="app/node_modules/jquery-ui-iconfont/jquery-ui.icon-font.min.css" rel="stylesheet">
    <!--
        As of 04/01/2025 doesn't work. Commented out, and dropped from
        package.json 
        <link href="app/node_modules/tablesorter/dist/css/theme.jui.min.css" rel="stylesheet"
        <script src="./app/node_modules/tablesorter/dist/js/jquery.tablesorter.min.js"></script>
        -->
    <link href="app/node_modules/jquery-confirm/dist/jquery-confirm.min.css" rel="stylesheet">

    <link href="app/css/with-info.css" rel="stylesheet">
    <link href="app/css/in-place.css" rel="stylesheet">
    <link href="app/css/App.css?wtf=1" rel="stylesheet">

    <link href="app/node_modules/font-awesome/css/font-awesome.css" rel="stylesheet">

    <script type="importmap">
      {
        "imports": {
          "jquery": "./app/node_modules/jquery/dist/jquery.js",
          "jquery-ui": "./app/node_modules/jquery-ui/dist/jquery-ui.js",
          "jquery-csv": "./app/node_modules/jquery-csv/src/jquery.csv.js",
          "jquery-confirm": "./app/node_modules/jquery-confirm/dist/jquery-confirm.min.js",
          "js-cookie": "./app/node_modules/js-cookie/dist/js.cookie.mjs",
          "jquery-validate": "./app/node_modules/jquery-validation/dist/jquery.validate.js",
          "jquery-tabledit": "./app/node_modules/jquery-tabledit/jquery.tabledit.js"
        }
      }
    </script>
    <script src="app/src/main.js" type="module"></script>
  </head>
  <body>
    <div id="loading" class="rainbow fullscreen">
      Loading...
    </div>
    
    <!-- #console will be prepended to #console_dialog once loading is complete -->
    <div id="console"></div>

    <div id="loaded" class="hidden fullscreen">
      <div id="main_tabs">
        <div id="settings_block">
          <span id="settings" class="fa fa-sliders"></span><br/>
          <span id="open_console" class="fa fa-bug"></span>
        </div>
        <ul style="margin-right:1.2em">
          <li><a class="main_tab" href="#fixed" data-class="Compressor">Fixed Compressor</a></li>
          <li><a class="main_tab" href="#portable" data-class="Compressor">Portable Compressor</a></li>
          <li><a class="main_tab" href="#loans" data-class="Loans">Loans</a></li>
          <li><a class="main_tab" href="#inventory" data-class="Inventory">Inventory</a></li>
          <li><a class="main_tab" href="#nitrox" data-class="Nitrox">Nitrox</a></li>
        </ul>
	  </div>
	</div>

	<!-- tabs are dynamically loaded -->

    <div id="console_dialog" class="fullscreen_dialog">
      <button id="console_dialog_close" name="close">Close</button>
    </div>

    <div id="settings_dialog" class="fullscreen_dialog" data-title="<span class='fa fa-sliders-h'></span> Settings">
      <div>
        <h1 class="settings_group">Tabs</h1>
        <label>Fixed Compressor
          <input type="checkbox" class="tab_enabler" name="features:fixed"></label>
        <label>Portable Compressor
          <input type="checkbox" class="tab_enabler" name="features:portable"></label>
        <label>Loans
          <input type="checkbox" class="tab_enabler" name="features:loans"></label>
        <label>Inventory
          <input type="checkbox" class="tab_enabler" name="features:inventory"></label>
        <label>Nitrox
          <input type="checkbox" class="tab_enabler" name="features:nitrox"></label>
        <h1 class="settings_group">Fixed Compressor</h1>
        <div class="table form_table zebra">
          <div class="table-row">
            <div class="table-cell">Predicted filter lifetime</div>
            <div class="table-cell">
              <input type="number" class="integer2" step="any" required name="compressor:fixed:filter:lifetime"> hours @ 20&deg;C
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">Coefficients</div>
            <div class="table-cell widest">
              A <input type="number" class="number floating_point" step="any" required name="compressor:fixed:filter:a"><br/>
              B <input type="number" class="number floating_point" step="any" required name="compressor:fixed:filter:b"><br/>
              C <input type="number" class="number floating_point" step="any" required name="compressor:fixed:filter:c"> <br/>
              D <input type="number" class="number floating_point" step="any" required name="compressor:fixed:filter:d">
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">Pumping rate</div>
            <div class="table-cell widest">
              <input type="number" name="compressor:fixed:pumping_rate" class="integer3"> lm<sup>-1</sup>
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">Purge frequency</div>
            <div class="table-cell widest">
              <input type="number" name="compressor:fixed:purge_freq" class="integer2"> mins
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">Max condensate</div>
            <div class="table-cell">
              <input type="number" name="compressor:fixed:safe_limit" class="integer2"> ml
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">
              <span>
                Enable sensors
              </span>
            </div>
            <div class="table-cell widest">
              <label>Intake &deg;C
                <input type="checkbox" name="compressor:fixed:enable_intake_temperature"></label>
              <label>Intake %RH
                <input type="checkbox" name="compressor:fixed:enable_intake_humidity"></label>
              <label>3rd Stage &deg;C
                <input type="checkbox" name="compressor:fixed:enable_internal_temperature"></label>
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">Sensor poll frequency</div>
            <div class="table-cell widest">
              <input type="number" class="floating_point" name="compressor:fixed:poll_frequency"> ms
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">Alarm temperature</div>
            <div class="table-cell widest">
              <input type="number" name="compressor:fixed:internal_temperature_alarm" class="integer3">&deg;C
            </div>
          </div>
        </div>
        <h1 class="settings_group">Portable Compressor</h1>
        <div class="table form_table zebra">
          <div class="table-row">
            <div class="table-cell">Predicted filter lifetime</div>
            <div class="table-cell widest">
              <input type="number" class="integer3" step="any" required name="compressor:portable:filter:lifetime"> hours @ 20&deg;C
            </div>
          </div>
          <div class="table-row">
            <div class="table-cell">Coefficients</div>
            <div class="table-cell widest">
              A <input type="number" class="number floating_point" step="any" required name="compressor:portable:filter:a"><br/>
              B <input type="number" class="number floating_point" step="any" required name="compressor:portable:filter:b"><br/>
              C <input type="number" class="number floating_point" step="any" required name="compressor:portable:filter:c"><br/>
              D <input type="number" class="number floating_point" step="any" required name="compressor:portable:filter:d">
            </div>
          </div>
        </div>
        <h1 class="settings_group">Loans</h1>
        <label>Return deadline
          <input type="number" required class="integer2" name="loan_return"> days
          <h1 class="settings_group">O<sub>2</sub> bank</h1>
          1 <input type="number" class="number floating_point" step="any" name="o2:bank:1:size"> ℓ,
          &pound;<input type="number" class="floating_point" step="0.0001" required name="o2:bank:1:price">/ℓ,
          <input type="number" class="number floating_point" step="any" name="o2:bank:1:bar"> bar<br/>
          2 <input type="number" class="number floating_point" step="any" name="o2:bank:2:size"> ℓ,
          &pound;<input type="number" class="floating_point" step="0.0001" required name="o2:bank:2:price">/ℓ,
		  <input type="number" class="number floating_point" step="any" name="o2:bank:2:bar"> bar<br/>
          3 <input type="number" class="number floating_point" step="any" name="o2:bank:3:size"> ℓ,
          &pound;<input type="number" class="floating_point" step="0.0001" required name="o2:bank:3:price">/ℓ,
		  <input type="number" class="number floating_point" step="any" name="o2:bank:3:bar"> bar<br/>
          4 <input type="number" class="number floating_point" step="any" name="o2:bank:4:size"> ℓ,
          &pound;<input type="number" class="floating_point" step="0.0001" required name="o2:bank:4:price">/ℓ,
		  <input type="number" class="number floating_point" step="any" name="o2:bank:3:bar"> bar<br/>
          <h1 class="settings_group">Databases</h1>
          <button name="change_database" title="Change to a different logging database" class="settings_button">Change logging database</button><br />
          <label>Remote URL<input class="widest" type="text" url name="db_index_url"></label><br />
          <button name="update_from_remote" title="Update roles and inventory" class="settings_button">Update from Remote DB</button>
      </div>
      <button name="close">Close</button>
    </div>
    
    <div id="auth_required" class="hidden" title="Authentication required">
      Login to <span class="url">?</span>
      <div class="table">
        <div class="table-row"><div class="table-cell">User:</div>
          <div class="table-cell widest"><input class="widest" type='text' name='user'></div>
      </div>
      <div class="table-row"><div class="table-cell">Pass:</div>
        <div class="table-cell widest"><input class="widest" type='password' name='pass'></div>
    </div>
</div>
    </div>
    
    <div id="connect_failed_dialog" class="hidden" title="Connect failed">
      Could not connect to the database at '<span class="url" name="failed_url"></span>'
      <fieldset>
        <legend>Select a database server</legend>
        <div>
          <input type="radio" id="use_browser" name="server_type">
          <label for="use_browser">Browser local storage</label>
        </div>
        <div>
          <input type="radio" id="use_sensor_server" name="server_type">
          <label for="use_sensor_server">Sensor server</label>
        </div>
        <div>
          <input type="radio" id="use_other" name="server_type">
          <label for="use_other">Other GET/POST server</label>
        </div>
        <div>
          <input type="radio" id="use_webdav" name="server_type">
          <label for="use_webdav">WebDAV</label>
        </div>
        <div id="server_url_required">
          <input type="text" id="server_url" name="server_url">
          <label for="server_url">URL</label>
        </div>
      </fieldset>
    </div>

    <div id="alert_dialog" class="hidden" title="Alert">
      <div id="alert_body">
      </div>
    </div>
  </body>
</html>
